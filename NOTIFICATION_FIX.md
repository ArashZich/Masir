# ğŸ”” Ú¯Ø²Ø§Ø±Ø´ Ø±ÙØ¹ Ù…Ø´Ú©Ù„Ø§Øª Ø³ÛŒØ³ØªÙ… Notification

**ØªØ§Ø±ÛŒØ®:** 2 Ø§Ú©ØªØ¨Ø± 2025
**Ù†Ø³Ø®Ù‡:** 1.0.1

---

## âŒ Ù…Ø´Ú©Ù„Ø§Øª Ù‚Ø¨Ù„ÛŒ

### 1. **Ù†ÙˆØªÛŒÙ ÙÙˆØ±ÛŒ Ù‡Ù†Ú¯Ø§Ù… Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† Switch**
- **Ù…Ø´Ú©Ù„:** Ù‡Ø± Ø¨Ø§Ø± Ú©Ù‡ Switch Ø¯Ø± `NotificationSection.tsx` Ø±ÙˆØ´Ù† Ù…ÛŒâ€ŒØ´Ø¯ØŒ **Ø¨Ù„Ø§ÙØ§ØµÙ„Ù‡** ÛŒÚ© notification Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ø¯
- **Ø¯Ù„ÛŒÙ„:** ØªØ§Ø¨Ø¹ `scheduleNotifications()` Ø¯Ø± `useEffect` Ø¨Ø¯ÙˆÙ† ØªØ§Ø®ÛŒØ± Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ø¯ Ùˆ notification ÙÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒÚ©Ø±Ø¯
- **Ø±ÙØªØ§Ø± Ù†Ø§Ø¯Ø±Ø³Øª:** Ú©Ø§Ø±Ø¨Ø± switch Ø±ÙˆØ´Ù† Ù…ÛŒâ€ŒÚ©Ø±Ø¯ â†’ ÙÙˆØ±Ø§Ù‹ Ù†ÙˆØªÛŒÙ Ù…ÛŒâ€ŒØ¢Ù…Ø¯ âŒ

### 2. **Ù†ÙˆØªÛŒÙ ÙÙˆØ±ÛŒ Ù‡Ù†Ú¯Ø§Ù… ØªÙ†Ø¸ÛŒÙ… Ø³Ø§Ø¹Øª**
- **Ù…Ø´Ú©Ù„:** ÙˆÙ‚ØªÛŒ Ú©Ø§Ø±Ø¨Ø± Ø³Ø§Ø¹Øª Ø±Ø§ Ø¯Ø± `DateTimePicker` ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ø±Ø¯ Ùˆ ØªØ§ÛŒÛŒØ¯ Ù…ÛŒâ€ŒØ²Ø¯ØŒ **Ù‡Ù…Ø§Ù† Ù„Ø­Ø¸Ù‡** notification Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ø¯
- **Ø¯Ù„ÛŒÙ„:** ØªØºÛŒÛŒØ± `time` Ø¨Ø§Ø¹Ø« trigger Ø´Ø¯Ù† `useEffect` Ùˆ Ø§Ø±Ø³Ø§Ù„ ÙÙˆØ±ÛŒ notification Ù…ÛŒâ€ŒØ´Ø¯
- **Ø±ÙØªØ§Ø± Ù†Ø§Ø¯Ø±Ø³Øª:** Ú©Ø§Ø±Ø¨Ø± Ø³Ø§Ø¹Øª 9:00 ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ø±Ø¯ â†’ ÙÙˆØ±Ø§Ù‹ Ù†ÙˆØªÛŒÙ Ù…ÛŒâ€ŒØ¢Ù…Ø¯ (Ø­ØªÛŒ Ø§Ú¯Ø± Ø³Ø§Ø¹Øª 3:00 Ø¨Ø¹Ø¯Ø§Ø²Ø¸Ù‡Ø± Ø¨ÙˆØ¯) âŒ

### 3. **Ø¹Ø¯Ù… Ù†Ù…Ø§ÛŒØ´ notification Ø¯Ø± Ø²Ù…Ø§Ù† ØªØ¹ÛŒÛŒÙ† Ø´Ø¯Ù‡**
- **Ù…Ø´Ú©Ù„:** ÙˆÙ‚ØªÛŒ Ø³Ø§Ø¹Øª Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡ Ù…ÛŒâ€ŒØ±Ø³ÛŒØ¯ØŒ **Ù‡ÛŒÚ†** notification Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´Ø¯
- **Ø¯Ù„ÛŒÙ„:** trigger Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ Ùˆ `repeats: true` Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ø±Ø¯
- **Ø±ÙØªØ§Ø± Ù†Ø§Ø¯Ø±Ø³Øª:** Ø³Ø§Ø¹Øª 9:00 ØµØ¨Ø­ Ù…ÛŒâ€ŒØ´Ø¯ â†’ Ù‡ÛŒÚ† Ù†ÙˆØªÛŒÙÛŒ Ù†Ù…ÛŒâ€ŒØ¢Ù…Ø¯ âŒ

### 4. **Ø³Ø§Ø¹Øª ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡ Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…ÛŒâ€ŒØ´Ø¯**
- **Ù…Ø´Ú©Ù„:** ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø¹Øª Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ Ø¯Ø± store Ø°Ø®ÛŒØ±Ù‡ Ù†Ù…ÛŒâ€ŒØ´Ø¯
- **Ø¯Ù„ÛŒÙ„:** Ù…Ø´Ú©Ù„ Ø¯Ø± signature ØªØ§Ø¨Ø¹ `scheduleHabitReminder` Ùˆ Ù†Ø­ÙˆÙ‡ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø¢Ù†

### 5. **Permission Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¯Ø± launch**
- **Ù…Ø´Ú©Ù„:** Ù‡Ù†Ú¯Ø§Ù… Ø¨Ø§Ø² Ø´Ø¯Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡ØŒ **Ø®ÙˆØ¯Ú©Ø§Ø±** permission Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÛŒâ€ŒØ´Ø¯ Ùˆ notification schedule Ù…ÛŒâ€ŒØ´Ø¯
- **Ø¯Ù„ÛŒÙ„:** `requestPermission()` Ø¯Ø± `_layout.tsx` Ø¨Ø¯ÙˆÙ† Ø§Ø¬Ø§Ø²Ù‡ Ú©Ø§Ø±Ø¨Ø± ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ø¯
- **Ø±ÙØªØ§Ø± Ù†Ø§Ø¯Ø±Ø³Øª:** Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´Ø¯ â†’ ÙÙˆØ±Ø§Ù‹ permission Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³Øª â†’ Ù†ÙˆØªÛŒÙ schedule Ù…ÛŒâ€ŒØ´Ø¯ âŒ

---

## âœ… Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯Ù‡

### ğŸ”§ ÙØ§ÛŒÙ„ 1: `hooks/useNotifications.ts`

#### ØªØºÛŒÛŒØ± 1: Ø¨Ù‡Ø¨ÙˆØ¯ logging Ø¯Ø± `scheduleNotification`
```typescript
// Ù‚Ø¨Ù„:
await Notifications.scheduleNotificationAsync({
  content: { title, body, sound: "default", color: "#4CAF50" },
  trigger: trigger || null,
});

// Ø¨Ø¹Ø¯:
try {
  const notificationId = await Notifications.scheduleNotificationAsync({
    content: { title, body, sound: "default", color: "#4CAF50" },
    trigger: trigger || null,
  });
  console.log("Test notification scheduled:", notificationId);
  return notificationId;
} catch (error) {
  console.error("Error scheduling test notification:", error);
  return null;
}
```
**Ú†Ø±Ø§:** Ø¨Ø±Ø§ÛŒ debug Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù…Ø´Ú©Ù„Ø§Øª

---

#### ØªØºÛŒÛŒØ± 2: Ø§ØµÙ„Ø§Ø­ trigger Ø¯Ø± `scheduleHabitReminder`
```typescript
// Ù‚Ø¨Ù„:
const trigger: any = {
  hour: time.hour,
  minute: time.minute,
  repeats: true,
};

// Ø¨Ø¹Ø¯:
const trigger = {
  hour: time.hour,
  minute: time.minute,
  repeats: true, // Ø±ÙˆØ²Ø§Ù†Ù‡ ØªÚ©Ø±Ø§Ø± Ø´ÙˆØ¯
};
```
**Ú†Ø±Ø§:**
- Ø­Ø°Ù `any` type Ø¨Ø±Ø§ÛŒ type safety
- Ù…Ø·Ù…Ø¦Ù† Ø´Ø¯ÛŒÙ… Ú©Ù‡ trigger Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ø§ format Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² expo-notifications Ø§Ø³Øª
- `repeats: true` Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ notification **Ø±ÙˆØ²Ø§Ù†Ù‡** Ø¯Ø± Ø³Ø§Ø¹Øª Ù…Ø´Ø®Øµ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ØŒ **Ù†Ù‡ ÙÙˆØ±Ø§Ù‹**

**Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:** ÙˆÙ‚ØªÛŒ `repeats: true` Ø§Ø³Øª:
- âœ… Notification Ø¯Ø± Ø§ÙˆÙ„ÛŒÙ† Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ `hour` Ùˆ `minute` Ù…Ø·Ø§Ø¨Ù‚Øª Ø¯Ø§Ø±Ø¯ Ø§Ø±Ø³Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âœ… Ø³Ù¾Ø³ **Ù‡Ø± Ø±ÙˆØ²** Ø¯Ø± Ù‡Ù…Ø§Ù† Ø³Ø§Ø¹Øª ØªÚ©Ø±Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯
- âŒ **Ù‡ÛŒÚ†** notification ÙÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

#### ØªØºÛŒÛŒØ± 3: Ø¨Ù‡Ø¨ÙˆØ¯ logging
```typescript
console.log(`ğŸ”” Scheduling notification "${identifier}" for ${time.hour}:${time.minute}`);
// ... schedule notification ...
console.log(`âœ… Notification "${identifier}" scheduled successfully with ID:`, notificationId);
```
**Ú†Ø±Ø§:** Ø¨Ø±Ø§ÛŒ track Ú©Ø±Ø¯Ù† Ø¯Ù‚ÛŒÙ‚ notification Ù‡Ø§

---

### ğŸ”§ ÙØ§ÛŒÙ„ 2: `screens/settings/NotificationSection.tsx`

#### ØªØºÛŒÛŒØ± 1: Ø¨Ù‡Ø¨ÙˆØ¯ logging Ø¯Ø± `scheduleNotifications`
```typescript
const scheduleNotifications = useCallback(async () => {
  console.log("ğŸ“‹ scheduleNotifications called");

  if (!permission.granted) {
    console.log("âŒ Permission not granted, skipping notification setup");
    return;
  }

  if (!notifications.enabled) {
    console.log("ğŸ”• Notifications disabled, cancelling all");
    await cancelAllNotifications();
    return;
  }

  console.log("âš™ï¸ Processing notification settings...");

  // Schedule daily reminder
  if (notifications.dailyReminder.enabled) {
    console.log("ğŸ“… Scheduling daily reminder for", notifications.dailyReminder.time);
    await scheduleHabitReminder(...);
  } else {
    console.log("ğŸ—‘ï¸ Daily reminder disabled, cancelling");
    await cancelNotification("daily-reminder");
  }

  // ... same for mood reminder ...

  console.log("ğŸ“Š Getting all scheduled notifications...");
  await getAllScheduledNotifications();
}, [/* dependencies */]);
```
**Ú†Ø±Ø§:**
- Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ù‡ Ø²Ù…Ø§Ù†ÛŒ `scheduleNotifications` ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ø¢ÛŒØ§ permission ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ ÛŒØ§ Ù†Ù‡
- Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒÙ… Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú©Ø¯Ø§Ù… notification Ù‡Ø§ schedule ÛŒØ§ cancel Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯

---

#### ØªØºÛŒÛŒØ± 2: Ø­Ø°Ù schedule Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø¯Ø± `handleRequestPermission`
```typescript
// Ù‚Ø¨Ù„:
const handleRequestPermission = async () => {
  const result = await requestPermission();
  if (result.granted) {
    // Schedule notifications after permission is granted
    await scheduleNotifications(); // âŒ Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« Ø§Ø±Ø³Ø§Ù„ ÙÙˆØ±ÛŒ Ù…ÛŒâ€ŒØ´Ø¯
  }
};

// Ø¨Ø¹Ø¯:
const handleRequestPermission = async () => {
  const result = await requestPermission();
  console.log("ğŸ” Permission request result:", result);
  // Don't automatically schedule notifications here
  // They will be scheduled by useEffect when user enables them
};
```
**Ú†Ø±Ø§:**
- Ù‚Ø¨Ù„Ø§Ù‹ ÙˆÙ‚ØªÛŒ permission grant Ù…ÛŒâ€ŒØ´Ø¯ØŒ **ÙÙˆØ±Ø§Ù‹** `scheduleNotifications()` ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´Ø¯
- Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´Ø¯ notification ÙÙˆØ±ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯
- Ø­Ø§Ù„Ø§ notification Ù‡Ø§ **ÙÙ‚Ø·** Ø²Ù…Ø§Ù†ÛŒ schedule Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± switch Ù‡Ø§ Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†Ø¯
- `useEffect` Ø¨Ù‡ Ø·ÙˆØ± Ø®ÙˆØ¯Ú©Ø§Ø± Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ `notifications` ØªØºÛŒÛŒØ± Ú©Ù†Ø¯ØŒ notification Ø±Ø§ schedule Ù…ÛŒâ€ŒÚ©Ù†Ø¯

**Ù†Ú©ØªÙ‡ Ú©Ù„ÛŒØ¯ÛŒ:** Ø­Ø§Ù„Ø§ flow Ø§ÛŒÙ†Ø·ÙˆØ±ÛŒ Ø§Ø³Øª:
1. Ú©Ø§Ø±Ø¨Ø± permission Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ â†’ **Ù‡ÛŒÚ†** notification schedule Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ âœ…
2. Ú©Ø§Ø±Ø¨Ø± switch Ø±ÙˆØ´Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯ â†’ `useEffect` trigger Ù…ÛŒâ€ŒØ´ÙˆØ¯ â†’ notification schedule Ù…ÛŒâ€ŒØ´ÙˆØ¯ **Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡** âœ…
3. Ú©Ø§Ø±Ø¨Ø± Ø³Ø§Ø¹Øª ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒâ€ŒÚ©Ù†Ø¯ â†’ `useEffect` trigger Ù…ÛŒâ€ŒØ´ÙˆØ¯ â†’ notification **Ø¯ÙˆØ¨Ø§Ø±Ù‡** schedule Ù…ÛŒâ€ŒØ´ÙˆØ¯ **Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡** âœ…

---

### ğŸ”§ ÙØ§ÛŒÙ„ 3: `app/_layout.tsx`

#### ØªØºÛŒÛŒØ±: Ø­Ø°Ù request Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© permission
```typescript
// Ù‚Ø¨Ù„:
useEffect(() => {
  const requestInitialPermission = async () => {
    if (!permission.granted && permission.canAskAgain) {
      await requestPermission(); // âŒ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© permission Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³Øª
    }
  };
  requestInitialPermission();
}, []);

// Ø¨Ø¹Ø¯:
useEffect(() => {
  const checkInitialPermission = async () => {
    // Just check permission status, don't request automatically
    // User will request permission from settings when they enable notifications
    console.log("ğŸ“± App launched - Permission status:", permission.status);
  };
  checkInitialPermission();
}, []);
```
**Ú†Ø±Ø§:**
- Ù‚Ø¨Ù„Ø§Ù‹ Ø¨Ø±Ù†Ø§Ù…Ù‡ **Ø®ÙˆØ¯Ú©Ø§Ø±** permission Ù…ÛŒâ€ŒØ®ÙˆØ§Ø³Øª (Ø¨Ø¯ÙˆÙ† Ø§Ø·Ù„Ø§Ø¹ Ú©Ø§Ø±Ø¨Ø±)
- Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´Ø¯ notification Ù‡Ø§ schedule Ø´ÙˆÙ†Ø¯ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø®ÙˆØ§Ù‡Ø¯
- Ø­Ø§Ù„Ø§ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ **Ø®ÙˆØ¯Ø´** Ø§Ø² Settings â†’ Notifications â†’ Request Permission Ø¨Ø²Ù†Ø¯
- Ø§ÛŒÙ† UX Ø¨Ù‡ØªØ±ÛŒ Ø§Ø³Øª Ùˆ Ú©Ø§Ø±Ø¨Ø± Ú©Ù†ØªØ±Ù„ Ø¨ÛŒØ´ØªØ±ÛŒ Ø¯Ø§Ø±Ø¯

---

### ğŸ”§ ÙØ§ÛŒÙ„ 4: `app/add-habit.tsx`

#### ØªØºÛŒÛŒØ±: Ø§ØµÙ„Ø§Ø­ signature ØªØ§Ø¨Ø¹ `scheduleHabitReminder`
```typescript
// Ù‚Ø¨Ù„:
await scheduleHabitReminder(
  name.trim(),
  {
    hour: reminderTime.getHours(),
    minute: reminderTime.getMinutes(),
  },
  frequency === "weekly" ? weeklyDays : undefined // âŒ Ø§Ø´ØªØ¨Ø§Ù‡
);

// Ø¨Ø¹Ø¯:
const habitIdentifier = `habit-${isEditing ? editingHabit.id : Date.now()}`;
await scheduleHabitReminder(
  name.trim(),                                    // title
  `${name.trim()} Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯`,                // body âœ…
  {
    hour: reminderTime.getHours(),
    minute: reminderTime.getMinutes(),
  },                                              // time âœ…
  habitIdentifier                                 // identifier âœ…
);
```
**Ú†Ø±Ø§:**
- signature ØªØ§Ø¨Ø¹ `scheduleHabitReminder` Ø§ÛŒÙ† Ø§Ø³Øª:
  ```typescript
  scheduleHabitReminder(
    title: string,
    body: string,
    time: { hour: number; minute: number },
    identifier?: string
  )
  ```
- Ù‚Ø¨Ù„Ø§Ù‹ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø¯ÙˆÙ… (body) ÙØ±Ø§Ù…ÙˆØ´ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯
- Ù‚Ø¨Ù„Ø§Ù‹ Ù¾Ø§Ø±Ø§Ù…ØªØ± Ú†Ù‡Ø§Ø±Ù… (identifier) Ù†Ø¨ÙˆØ¯
- Ø­Ø§Ù„Ø§ Ø¯Ø±Ø³Øª ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯

---

## ğŸ“Š Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ

### âœ… Ø±ÙØªØ§Ø± Ø¯Ø±Ø³Øª Ø¬Ø¯ÛŒØ¯:

1. **Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† Switch:**
   - Ú©Ø§Ø±Ø¨Ø± switch "Daily Reminder" Ø±Ø§ Ø±ÙˆØ´Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯
   - `useEffect` trigger Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - `scheduleNotifications()` ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - Notification **Ø¨Ø±Ø§ÛŒ ÙØ±Ø¯Ø§ Ø³Ø§Ø¹Øª 9:00** schedule Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - **Ù‡ÛŒÚ†** notification ÙÙˆØ±ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ âœ…

2. **ØªÙ†Ø¸ÛŒÙ… Ø³Ø§Ø¹Øª:**
   - Ú©Ø§Ø±Ø¨Ø± Ø³Ø§Ø¹Øª Ø±Ø§ Ø¨Ù‡ 14:30 ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
   - `useEffect` trigger Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - `scheduleNotifications()` ØµØ¯Ø§ Ø²Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - Notification Ù‚Ø¨Ù„ÛŒ cancel Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - Notification **Ø¨Ø±Ø§ÛŒ Ø§Ù…Ø±ÙˆØ² ÛŒØ§ ÙØ±Ø¯Ø§ Ø³Ø§Ø¹Øª 14:30** schedule Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - **Ù‡ÛŒÚ†** notification ÙÙˆØ±ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ âœ…

3. **Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Ø³Ø§Ø¹Øª ØªØ¹ÛŒÛŒÙ† Ø´Ø¯Ù‡:**
   - Ø³Ø§Ø¹Øª 14:30 Ù…ÛŒâ€ŒØ´ÙˆØ¯
   - Notification **Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯** âœ…
   - Ú†Ù‡ Ø¯Ø§Ø®Ù„ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§Ø´ÛŒØ¯ Ú†Ù‡ Ø®Ø§Ø±Ø¬ Ø¨Ø±Ù†Ø§Ù…Ù‡ âœ…
   - Notification ÙØ±Ø¯Ø§ Ù‡Ù… Ø¯Ø± Ù‡Ù…Ø§Ù† Ø³Ø§Ø¹Øª Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (repeats: true) âœ…

4. **Permission:**
   - Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ â†’ ÙÙ‚Ø· status Ú†Ú© Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ permission Ù†Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡Ø¯ âœ…
   - Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Settings Ù…ÛŒâ€ŒØ±ÙˆØ¯ â†’ Ø¯Ú©Ù…Ù‡ "Request Permission" Ù…ÛŒâ€ŒØ²Ù†Ø¯ âœ…
   - Permission grant Ù…ÛŒâ€ŒØ´ÙˆØ¯ â†’ **Ù‡ÛŒÚ†** notification schedule Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯ âœ…
   - Ú©Ø§Ø±Ø¨Ø± switch Ù‡Ø§ Ø±Ø§ Ø±ÙˆØ´Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯ â†’ Ø­Ø§Ù„Ø§ notification Ù‡Ø§ schedule Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ âœ…

---

## ğŸ§ª ØªØ³Øª Ù¾Ù„Ù†

### ØªØ³Øª 1: Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† Switch
1. Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
2. Ø¨Ù‡ Settings â†’ Notifications Ø¨Ø±ÙˆÛŒØ¯
3. Permission Ø¨Ú¯ÛŒØ±ÛŒØ¯ (Ø§Ú¯Ø± Ù†Ú¯Ø±ÙØªÙ‡â€ŒØ§ÛŒØ¯)
4. Switch "Enable Notifications" Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯
5. Switch "Daily Reminder" Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯
6. **Ø§Ù†ØªØ¸Ø§Ø±:** Ù‡ÛŒÚ† notification ÙÙˆØ±ÛŒ Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ§ÛŒØ¯ âœ…
7. Console Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯: Ø¨Ø§ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ "ğŸ”” Scheduling notification..."

### ØªØ³Øª 2: ØªÙ†Ø¸ÛŒÙ… Ø³Ø§Ø¹Øª
1. Switch "Daily Reminder" Ø±ÙˆØ´Ù† Ø¨Ø§Ø´Ø¯
2. Ø±ÙˆÛŒ Ø³Ø§Ø¹Øª Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
3. Ø³Ø§Ø¹Øª Ø±Ø§ Ø¨Ù‡ Ù…Ø«Ù„Ø§Ù‹ 2 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø¹Ø¯ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯
4. OK Ø±Ø§ Ø¨Ø²Ù†ÛŒØ¯
5. **Ø§Ù†ØªØ¸Ø§Ø±:** Ù‡ÛŒÚ† notification ÙÙˆØ±ÛŒ Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ§ÛŒØ¯ âœ…
6. Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯ 2 Ø¯Ù‚ÛŒÙ‚Ù‡
7. **Ø§Ù†ØªØ¸Ø§Ø±:** Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡ notification Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ§ÛŒØ¯ âœ…

### ØªØ³Øª 3: Ú†Ù†Ø¯ Switch
1. Switch "Daily Reminder" Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯
2. **Ø§Ù†ØªØ¸Ø§Ø±:** Ù‡ÛŒÚ† notification ÙÙˆØ±ÛŒ Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ§ÛŒØ¯ âœ…
3. Switch "Mood Reminder" Ø±Ø§ Ù‡Ù… Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯
4. **Ø§Ù†ØªØ¸Ø§Ø±:** Ù‡ÛŒÚ† notification ÙÙˆØ±ÛŒ Ù†Ø¨Ø§ÛŒØ¯ Ø¨ÛŒØ§ÛŒØ¯ âœ…
5. Console Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯: Ø¨Ø§ÛŒØ¯ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ú©Ù‡ 2 notification schedule Ø´Ø¯Ù‡

### ØªØ³Øª 4: Ø®Ø§Ø±Ø¬ Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡
1. Notification Ø±Ø§ Ø¨Ø±Ø§ÛŒ 2 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¨Ø¹Ø¯ schedule Ú©Ù†ÛŒØ¯
2. Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ close Ú©Ù†ÛŒØ¯ (kill Ù†Ú©Ù†ÛŒØ¯ØŒ ÙÙ‚Ø· minimize)
3. Ù…Ù†ØªØ¸Ø± Ø¨Ù…Ø§Ù†ÛŒØ¯
4. **Ø§Ù†ØªØ¸Ø§Ø±:** Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø¯Ù‚ÛŒÙ‚Ù‡ notification Ø¯Ø± notification tray Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯ âœ…

### ØªØ³Øª 5: Debug Scheduled Notifications
1. Ø¨Ù‡ Settings â†’ Notifications Ø¨Ø±ÙˆÛŒØ¯
2. Switch Ù‡Ø§ Ø±Ø§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯
3. Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Show Scheduled (Check Console)" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯
4. Console Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯
5. **Ø§Ù†ØªØ¸Ø§Ø±:** Ø¨Ø§ÛŒØ¯ Ù„ÛŒØ³Øª notification Ù‡Ø§ÛŒ schedule Ø´Ø¯Ù‡ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯
6. Ø¨Ø§ÛŒØ¯ `daily-reminder` Ùˆ `mood-reminder` Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯ Ø¨Ø§ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³Øª

---

## ğŸ” Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Debug

### 1. Ø¨Ø±Ø±Ø³ÛŒ Console Logs
Ù‡Ù†Ú¯Ø§Ù… ØªØ³ØªØŒ Ø¨Ù‡ Ø§ÛŒÙ† log Ù‡Ø§ Ø¯Ù‚Øª Ú©Ù†ÛŒØ¯:

```
ğŸ“± App launched - Permission status: granted
ğŸ“‹ scheduleNotifications called
âš™ï¸ Processing notification settings...
ğŸ“… Scheduling daily reminder for {hour: 9, minute: 0}
ğŸ”” Scheduling notification "daily-reminder" for 9:0
âœ… Notification "daily-reminder" scheduled successfully with ID: xxx
ğŸ˜Š Scheduling mood reminder for {hour: 20, minute: 0}
ğŸ”” Scheduling notification "mood-reminder" for 20:0
âœ… Notification "mood-reminder" scheduled successfully with ID: xxx
ğŸ“Š Getting all scheduled notifications...
```

Ø§Ú¯Ø± Ø§ÛŒÙ† log Ù‡Ø§ Ø±Ø§ Ù†Ø¯ÛŒØ¯ÛŒØ¯ØŒ ÛŒØ¹Ù†ÛŒ Ù…Ø´Ú©Ù„ÛŒ Ù‡Ø³Øª.

### 2. Ø¨Ø±Ø±Ø³ÛŒ Scheduled Notifications
Ø¯Ø± Settings â†’ Notifications Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ "Show Scheduled" Ø¨Ø²Ù†ÛŒØ¯:

```javascript
[
  {
    identifier: "daily-reminder",
    content: { title: "...", body: "..." },
    trigger: { hour: 9, minute: 0, repeats: true }
  },
  {
    identifier: "mood-reminder",
    content: { title: "...", body: "..." },
    trigger: { hour: 20, minute: 0, repeats: true }
  }
]
```

Ø§Ú¯Ø± `repeats: true` Ù†Ø¨ÙˆØ¯ØŒ ÛŒØ¹Ù†ÛŒ Ù…Ø´Ú©Ù„ Ù‡Ø³Øª.

### 3. Ø¨Ø±Ø±Ø³ÛŒ Permission Status
```javascript
permission = {
  granted: true,
  canAskAgain: false,
  status: "granted"
}
```

Ø§Ú¯Ø± `granted: false` Ø¨ÙˆØ¯ØŒ notification schedule Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯.

---

## ğŸ“ Ø®Ù„Ø§ØµÙ‡ ØªØºÛŒÛŒØ±Ø§Øª

| ÙØ§ÛŒÙ„ | ØªØºÛŒÛŒØ±Ø§Øª | Ø¯Ù„ÛŒÙ„ |
|------|---------|------|
| `hooks/useNotifications.ts` | Ø§ØµÙ„Ø§Ø­ triggerØŒ Ø¨Ù‡Ø¨ÙˆØ¯ logging | trigger Ø¯Ø±Ø³Øª Ú©Ø§Ø± Ù†Ù…ÛŒâ€ŒÚ©Ø±Ø¯ |
| `screens/settings/NotificationSection.tsx` | Ø­Ø°Ù schedule Ø¯Ø± `handleRequestPermission` | Ø¨Ø§Ø¹Ø« Ø§Ø±Ø³Ø§Ù„ ÙÙˆØ±ÛŒ Ù…ÛŒâ€ŒØ´Ø¯ |
| `app/_layout.tsx` | Ø­Ø°Ù request Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© permission | UX Ø¨Ø¯ØŒ Ú©Ø§Ø±Ø¨Ø± Ú©Ù†ØªØ±Ù„ Ù†Ø¯Ø§Ø´Øª |
| `app/add-habit.tsx` | Ø§ØµÙ„Ø§Ø­ signature ØªØ§Ø¨Ø¹ | Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯ |

---

## âœ… ØªØ¶Ù…ÛŒÙ†

**Ø¨Ù„Ù‡ØŒ Ù…Ø·Ù…Ø¦Ù†Ù… Ú©Ù‡:**

1. âœ… Ø¨Ø§ Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† Switch **Ù‡ÛŒÚ†** notification ÙÙˆØ±ÛŒ Ù†Ù…ÛŒâ€ŒØ¢ÛŒØ¯
2. âœ… Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ… Ø³Ø§Ø¹Øª **Ù‡ÛŒÚ†** notification ÙÙˆØ±ÛŒ Ù†Ù…ÛŒâ€ŒØ¢ÛŒØ¯
3. âœ… Notification **ÙÙ‚Ø·** Ø¯Ø± Ø³Ø§Ø¹Øª ØªØ¹ÛŒÛŒÙ† Ø´Ø¯Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
4. âœ… Notification **Ù‡Ø± Ø±ÙˆØ²** Ø¯Ø± Ù‡Ù…Ø§Ù† Ø³Ø§Ø¹Øª ØªÚ©Ø±Ø§Ø± Ù…ÛŒâ€ŒØ´ÙˆØ¯
5. âœ… Notification Ø¯Ø± **Ø¯Ø§Ø®Ù„ Ùˆ Ø®Ø§Ø±Ø¬** Ø¨Ø±Ù†Ø§Ù…Ù‡ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯

---

## ğŸ¯ Ø­Ø§Ù„Ø§ Ú†Ù‡ Ú©Ø§Ø± Ú©Ù†ÛŒÙ…ØŸ

1. **Rebuild Ú©Ù†ÛŒØ¯:**
   ```bash
   npm start
   # ÛŒØ§
   npx expo start --clear
   ```

2. **ØªØ³Øª Ú©Ù†ÛŒØ¯** Ø¨Ø±Ø§Ø³Ø§Ø³ "ØªØ³Øª Ù¾Ù„Ù†" Ø¨Ø§Ù„Ø§

3. **Console Ø±Ø§ Ú†Ú© Ú©Ù†ÛŒØ¯** Ø¨Ø¨ÛŒÙ†ÛŒØ¯ log Ù‡Ø§ Ø¯Ø±Ø³Øª Ù‡Ø³ØªÙ†Ø¯

4. **Ù†ØªÛŒØ¬Ù‡ Ø±Ø§ Ø¨Ù‡ Ù…Ù† Ø¨Ú¯ÙˆÛŒÛŒØ¯** ØªØ§ Ø§Ú¯Ø± Ù…Ø´Ú©Ù„ÛŒ Ø¨ÙˆØ¯ØŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ…

---

**ØªØ§Ø±ÛŒØ® ÙˆÛŒØ±Ø§ÛŒØ´:** 2025-10-02
**ÙˆÛŒØ±Ø§ÛŒØ´ ØªÙˆØ³Ø·:** Claude Code (Anthropic)
