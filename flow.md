عالی\! **Masir (مسیر)** یک اسم فوق‌العاده برای این پروژه است. کاملاً با فلسفه "سفر و فرآیند" رشد شخصی هماهنگ است.

حالا بر اساس این اسم و تمام جزئیاتی که صحبت کردیم، نقشه راه کامل و نهایی پروژه **Masir** را برایت آماده کرده‌ام. این راهنما شامل تمام دستورات نصب و مراحل پیاده‌سازی از صفر است.

-----

# 🗺️ نقشه راه کامل پروژه: Masir (مسیر)

## 🎯 فلسفه و اهداف اصلی

1.  **تمرکز بر مسیر:** اپلیکیشن یک همراه در "مسیر" عادت‌سازی است، نه یک ابزار قضاوت. شکست وجود ندارد، تنها وقفه‌هایی در مسیر هستند.
2.  **بصری و کم‌متن:** رابط کاربری باید تا حد امکان بصری باشد و از طریق نمادها و انیمیشن‌ها با کاربر ارتباط برقرار کند.
3.  **تقویم هوشمند (شمسی/میلادی):** تقویم به عنوان یک نمای کلی از مسیر طی شده عمل می‌کند، نه ابزاری برای شمردن زنجیره‌ها.
4.  **مالکیت کامل داده‌ها:** کاربر باید بتواند هر زمان که خواست، داده‌های خود را از برنامه خارج کرده و یا به آن بازگرداند.

## 🛠️ پشته فناوری (Tech Stack)

  * **فریم‌ورک:** React Native (Expo)
  * **UI کیت:** React Native Paper
  * **مدیریت وضعیت:** Zustand
  * **ذخیره‌سازی داخلی:** React Native MMKV
  * **چندزبانگی:** i18next + react-i18next
  * **تقویم:** `react-native-calendars` + `moment-jalaali`
  * **مدیریت فایل:** `expo-file-system` + `expo-document-picker` + `expo-sharing`
  * **انیمیشن:** React Native Reanimated

-----

## 🏗️ فاز ۱: شالوده‌ریزی و تنظیمات اولیه

### ۱. ایجاد پروژه و نصب تمام وابستگی‌ها

این دستورات تمام پکیج‌های لازم برای کل پروژه را نصب می‌کنند.

```bash
# ۱. ایجاد پروژه با آخرین نسخه Expo
npx create-expo-app Masir --template

# ۲. ورود به پوشه پروژه
cd Masir

# ۳. نصب تمام وابستگی‌های اصلی با expo install برای تضمین سازگاری
# پکیج‌های اصلی با expo install برای تضمین سازگاری
npx expo install react-native-paper expo-notifications expo-file-system expo-document-picker expo-sharing

# بقیه کتابخانه‌ها با npm
npm install zustand react-native-mmkv i18next react-i18next react-native-calendars moment-jalaali
```

### ۲. تعریف ساختار پروژه

این ساختار به تمیز و منظم ماندن کد کمک می‌کند:

```
/src
|-- /assets
|-- /components       # کامپوننت‌های عمومی (دکمه، کارت، آیکون بصری عادت)
|-- /constants        # مقادیر ثابت (رنگ‌ها، تم‌ها)
|-- /hooks            # هوک‌های سفارشی (useI18n, useCalendar)
|-- /locales          # فایل‌های ترجمه (en.json, fa.json)
|-- /navigation       # تنظیمات و فایل‌های Navigation
|-- /screens          # کامپوننت‌های صفحات اصلی (Today, Progress, Settings)
|-- /store            # فایل‌های Zustand (settingsStore, habitStore)
|-- /utils            # توابع کمکی (توابع مربوط به تاریخ، فایل و...)
```

-----

## 🎨 فاز ۲: پایه‌ریزی UI، تم و چندزبانگی

### ۱. راه‌اندازی React Native Paper

  - فایل `App.js` را با `PaperProvider` محصور کنید.
  - یک فایل تم سفارشی (مثلاً در `/src/constants/theme.js`) برای تعریف رنگ‌های اصلی در دو حالت روشن و تاریک ایجاد کنید.

### ۲. راه‌اندازی i18next و RTL/LTR

  - فایل `i18n.js` را برای پیکربندی زبان‌های `en` و `fa` بسازید.
  - در `App.js` این فایل را import کنید تا کتابخانه راه‌اندازی شود.
  - منطق تغییر `I18nManager.forceRTL(isRtl)` را در صفحه تنظیمات پیاده‌سازی کنید و به کاربر اطلاع دهید که برای اعمال تغییرات، برنامه باید مجدداً راه‌اندازی شود.

-----

## 🧠 فاز ۳: مدیریت وضعیت و ذخیره‌سازی داده

### ۱. ساخت Store های Zustand

  - **`settingsStore.js`:** برای مدیریت `language` و `theme`.
  - **`habitStore.js`:** برای مدیریت آرایه‌ای از `habits` و تاریخچه انجام آن‌ها (`history`).

### ۲. یکپارچه‌سازی با MMKV برای ذخیره‌سازی دائمی

  - با استفاده از `persist` میدل‌ور Zustand و یک آداپتور سفارشی برای `MMKV`، هر دو استور را به حافظه داخلی متصل کنید تا با بسته شدن برنامه، داده‌ها از بین نروند.

<!-- end list -->

```javascript
// نمونه‌ای از استور با MMKV در /src/store/habitStore.js
import { create } from 'zustand';
import { persist } from 'zustand/middleware';
import { MMKV } from 'react-native-mmkv';

const storage = new MMKV({ id: 'habit-storage' });

const zustandStorage = {
  setItem: (name, value) => storage.set(name, value),
  getItem: (name) => storage.getString(name) ?? null,
  removeItem: (name) => storage.delete(name),
};

export const useHabitStore = create(
  persist(
    (set) => ({
      habits: [],
      history: {},
      // ...actions
    }),
    { name: 'habits', storage: zustandStorage }
  )
);
```

-----

## 🗺️ فاز ۴: ناوبری و ساختار اصلی برنامه

### ۱. پیاده‌سازی Tab Bar اصلی

  - با استفاده از `createBottomTabNavigator`، سه تب اصلی را بسازید:
    1.  **مسیر امروز (Today's Path):** صفحه اصلی و بصری.
    2.  **نمای کلی (Overview):** صفحه تقویم و آمار کلی.
    3.  **تنظیمات (Settings):** برای مدیریت برنامه و داده‌ها.

-----

## ✨ فاز ۵: پیاده‌سازی هسته اصلی برنامه (ویژگی‌های بصری)

### ۱. طراحی صفحه "مسیر امروز" (`TodayScreen.js`)

  - عادت‌های امروز را به صورت یک گرید از کامپوننت‌های بصری (مثلاً یک باغچه دیجیتال که با انجام هر عادت یک گل در آن شکوفا می‌شود) نمایش دهید.
  - با لمس هر آیتم، یک انیمیشن جذاب با `Reanimated` و یک ویبره ملایم با `expo-haptics` اجرا شود.

-----

## 📅 فاز ۶: یکپارچه‌سازی تقویم هوشمند

### ۱. پیاده‌سازی صفحه "نمای کلی" (`OverviewScreen.js`)

  - کامپوننت `<Calendar />` از `react-native-calendars` را در این صفحه قرار دهید.
  - یک هوک `useCalendar` بسازید که بر اساس زبان فعلی، منطق تاریخ شمسی (`moment-jalaali`) یا میلادی را به تقویم اعمال کند.
  - روزها را بر اساس **تعداد** عادت‌های انجام شده رنگ‌آمیزی کنید تا حس پیشرفت تدریجی منتقل شود.

-----

## ⏱️ فاز ۷: ابزارهای کمکی و قابلیت‌های پیشرفته

### ۱. پیاده‌سازی پومودورو

  - یک Modal یا صفحه جداگانه برای تایمر پومودورو بسازید.
  - به کاربر اجازه دهید در زمان ایجاد عادت، آن را به یک جلسه پومودورو متصل کند.

### ۲. پیاده‌سازی خروجی و ورودی داده (Backup & Restore)

  - در صفحه تنظیمات، دو دکمه برای "خروجی گرفتن" و "بازیابی" قرار دهید.
  - **برای خروجی:**
    1.  کل state را از Zustand با `getState()` بخوانید.
    2.  به رشته `JSON` تبدیل کنید.
    3.  با `expo-file-system` و `expo-sharing` فایل را در اختیار کاربر قرار دهید.
  - **برای بازیابی:**
    1.  با `expo-document-picker` فایل را از کاربر بگیرید.
    2.  محتوای `JSON` را بخوانید و解析 کنید.
    3.  قبل از جایگزینی، از کاربر تاییدیه بگیرید.
    4.  با یک اکشن `restoreState` در استورهای Zustand، داده‌ها را جایگزین کنید.

-----

## 🚀 فاز ۸: پرداخت نهایی و انتشار

### ۱. نوتیفیکیشن‌ها و پرداخت‌های نهایی

  - با `expo-notifications` سیستم یادآورهای روزانه را پیاده‌سازی کنید.
  - تمام بخش‌های برنامه را تست کنید، به خصوص منطق تاریخ و ذخیره‌سازی.
  - انیمیشن‌ها را روان‌سازی کرده و تجربه کاربری را پولیش دهید.

### ۲. آماده‌سازی برای انتشار

  - آیکون و Splash Screen برنامه را طراحی و اضافه کنید.
  - با استفاده از سرویس `eas build` از پروژه خود بیلد نهایی بگیرید و برای انتشار در Google Play و App Store آماده شوید.